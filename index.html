<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Distribution Patterns</title>

		<meta name="description" content="Apresentação de Distributions Patterns">
		<meta name="author" content="Lucas Caetano Possatti">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					<script type="text/template">

# DISTRIBUTION PATTERNS

Aluno: Lucas Caetano Possatti

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

# 1. Remote Facade

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

Provê objetos de maior granulação no lugar de objetos com menor granulação, para melhorar a eficiência de comunicação através de uma rede.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

![](./img/remote-facade-1.png)

*Exemplo de Remote Facade*

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Vantagens de objetos de granulação fina (fine-grained)

 - Fácil de revelar a intenção por trás dos nomes de atributos e métodos de um objeto.
 - Maior controle de métodos e objetos menores.
 - Programação facilitada / Maior produtividade.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Desvantagens da granulação fina com chamadas inter-processos

 - Para interagir com o objeto, as vezes, são necessárias muitos chamadas a métodos.
 - Chamadas entre processos são muito mais lentas do que chamadas em um mesmo processo.
 - Mesmo com os dois processos no mesmo computador.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

![](./img/remote-facade-2.png)

*Como o Remote Facade funciona*

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

 - Em casos simples, o Facade pode representar um único objeto.
 - Em casos mais complexos, o Facade pode representar vários objetos.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Quando usar o Remote Facade?

 - Quando você precisar de acessar métodos muito granulados remotamente.
 - Mas as vantagens também valem para comunicação inter-processos na mesma máquina.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Quando não usá-lo?

 - Quando tudo ocorrer em um único processo.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

## Exemplo de Remote Facade:

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Classe de endereço anêmica

```
public class Endereco {
	private String cep;
	private String pais;
	private String estado;
	private String cidade;
	private String rua;
	private Integer numero;
	// ... gets e sets.
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Enviar dados de endereço

```
public class EnderecoFacade {
	//...
	public void setEndereco(String cep, String pais, String estado, String cidade, String rua, Integer numero) {
		enderecoAtual.setCep(cep);
		enderecoAtual.setPais(pais);
		enderecoAtual.setEstado(estado);
		enderecoAtual.setCidade(cidade);
		enderecoAtual.setRua(rua);
		enderecoAtual.setNumero(numero);
	}
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Obter dados de endereço

```
public class EnderecoFacade {
	//...
	public Map<String, String> getDadosEndereco() {
		HashMap<String, String> dados = new HashMap<String, String>();
		dados.put("cep", enderecoAtual.getCep());
		dados.put("pais", enderecoAtual.getPais());
		dados.put("estado", enderecoAtual.getEstado());
		dados.put("cidade", enderecoAtual.getCidade());
		dados.put("rua", enderecoAtual.getRua());
		dados.put("numero", enderecoAtual.getNumero().toString());
		return dados;
	}
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

# 2. Data Transfer Object (DTO)

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

Um objeto que carrega dados entre processos, para reduzir o número de chamadas a métodos.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

![](./img/dto-1.png)

*Exemplo de DTO*

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### O que é DTO?

 - O DTO é um único objeto que contém todos os dados necessários para um determinada chamada.
 - Deve ser serializável.
 - Algumas pessoas na comunidade da Sun chamam esse padrão de "Value Object".

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

> "In many ways, a Data Transfer Object is one of those objects our mothers told us never to write."

> "The value of this usually hateful beast is that it allows you to move several pieces of information over a network in a single call — a trick that's essential for
dis tributed systems." <!-- .element: class="fragment" data-fragment-index="1" -->

> — Martin Fowler <!-- .element: class="fragment" data-fragment-index="2" -->

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Como funciona?

 - Sempre que um objeto remoto precisa de alguns dados, ele chama o DTO mais adequado.
 - É melhor pecar por mais dados do que por menos dados.
 - Ex: Um DTO de pedido provavelmente viria com dados do cliente, itens pedidos, informação de entrega, e etc.
 - Um DTO representa dados usando tipos bem primitivos
 - E conectando objetos que se relacionariam como um grafo simples.
 - Faz sentido projetar um DTO pensando nas necessidades do cliente (Web ou GUI).

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Como funciona? ...
 
 - Esse padrão pode ser usado tanto para as requisições quanto para as respostas.
 - Um "Record Set" é um DTO para um BD SQL.
 - Linguagens como Java e C# já vem com meios de serializar o DTO.
 - Uma alternativa é escrever o algoritmo de serialização na mão.
 - É possível usar reflexão para agilizar este último.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

![](./img/dto-2.png)

*Exemplo de Assembler de DTO*

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Quando usar DTOs?

 - Sempre que for necessário transferir múltiplos dados entre processos em uma única chamada.
 - Você pode usar uma representação textual do DTO, para não ter de criar a classe. Mas isso acopla muito as coisas a representação textual.
 - Outro uso comum, é quando você quer usar um DTO como fonte de dados para vários componentes em diferentes camadas.

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

## Exemplo de DTO:

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Comprador

```
public class Comprador {

	private String nome;
	private Integer idade;
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Produto

```
public class Produto {
	private String nome;
	private String descricao;
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Endereco

```
public class Endereco {
	private String cep;
	private String pais;
	private String estado;
	private String cidade;
	private String rua;
	private Integer numero;
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### Pedido

```
public class Pedido {
	Comprador comprador;
	Map<Produto, Integer> itens;
	Endereco destino;
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

### PedidoDTO

```
public class PedidoDTO {
	private String nomeComprador;
	private Integer idadeComprador;
	private Map<String, Integer> itensDaCompra;
	private String destinoCep;
	private String destinoPais;
	private String destinoEstado;
	private String destinoCidade;
	private String destinoRua;
	private Integer destinoNumero;
	//...
}
```

					</script>
				</section>
				<section data-markdown>
					<script type="text/template">

# Obrigado! :)
					</script>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>

